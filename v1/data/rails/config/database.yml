# Master blacklisting issue
# https://github.com/taskrabbit/makara/issues/101

default: &default
  # Parameter to explor if this is allowed here
  # reconnect: true
  url: mysql2-makara:///
  makara:
    # rescue_connection_failures: false
    # master_strategy: failover
    # master_node_selector: 'Makara::NodeSelectors::SingleWithFailover'
    # slave_node_selector: 'Makara::NodeSelectors::RoundRobin'
    sticky: true
    # Paramters to explore
    # slave_strategy: failover
    # master_ttl: 5
    # blacklist_duration: 0
    connections:
      - role: master
        name: primary
        url: 'mysql2://root:password@master:33061/testdb'
      - name: replica
        url: 'mysql2://root:password@goldfish:33062/testdb'

test:
  <<: *default

development:
  <<: *default

production:
  <<: *default
